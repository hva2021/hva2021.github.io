var loadstart,isLocal,elemGame,game,body,elemSelect;function start(){window.loadstart||(window.loadstart=!0,setLocalStatus(),setReferences(),setMapSelector(),setLevelEditor(),setOptions(),setCheats())}function setLocalStatus(){window.isLocal="file://"==window.location.origin}function setReferences(){window.elemGame=document.getElementById("game"),window.game=window.elemGame.contentWindow,isLocal||(window.game.parentwindow=window),window.body=document.body,window.elemSelect=document.getElementById("in_mapselect")}function setMapSelector(e){window.elemSelect||e||setTimeout((function(){setMapSelector(!0)}),350);var t,a,o,n="";for(t=1;t<=8;++t)for(a=1;a<=4;++a)n+=createAdderMap(t,a);if(elemSelect.innerHTML+=n+createAdderBigMap("Map Generator!","setGameMapRandom"),!isLocal)for(game.parentwindow=window,t=1;t<=8;++t)for(a=1;a<=4;++a)game["World"+t+String(a)]&&(o=document.getElementById("maprect"+t+","+a))&&(o.className="maprect")}function createAdderMap(e,t){var a="";return a+="<div class='maprectout'>",a+="<div id='maprect"+e+","+t,a+="' class='maprect"+(isLocal?"":" off")+"'>",a+=e+"-"+t,a+="</div></div>"}function createAdderBigMap(name,onclick,giant){var adder="";return adder+="<div class='maprectout'>",adder+="<div class='maprect big "+(giant?"giant":"")+"'>",adder+=name,adder+="</div></div>",setTimeout((()=>{document.querySelectorAll(".maprectout:not(.toggleGams) .maprect.big").forEach((function(el){el.addEventListener("click",(function(){let x=onclick+"()";eval(x)}))}))}),1),adder}function setGameMap(e,t){"maprect"==document.getElementById("maprect"+e+","+t).className&&(game.postMessage({type:"setMap",map:[e,t]},"*"),game.focus())}function onMapLoad(e,t){var a=document.getElementById("maprect"+e+","+t);a&&(a.className="maprect")}function setGameMapRandom(){game.postMessage({type:"setMap",map:["Random","Overworld"]},"*"),game.focus()}function setLevelEditor(){var e=document.getElementById("in_editor");button=createAdderBigMap("Make your<br />own levels!","startEditor",!0),e.innerHTML+="Why use Nintendo's?<br />"+button+"<br />You can save these as text files when you're done."}function startEditor(){game.postMessage({type:"startEditor"},"*"),game.focus()}function setOptions(){var e,t,a=document.getElementById("in_options"),o=["Mute","Luigi","FastFWD"],n="";for(t in o)n+="<div class='maprectout toggleGams' data-option='"+(e=o[t])+"'><div class='maprect big larger'>Toggle "+e+"</div></div>",n+="<br />";a.innerHTML+=n+"<br />More coming soon!",setTimeout((()=>{document.querySelectorAll(".maprectout.toggleGams").forEach((function(e){e.addEventListener("click",(function(){toggleGame(e.getAttribute("data-option"))}),!1)}))}),1)}function toggleGame(e){game.postMessage({type:"toggleOption",option:e},"*")}function setCheats(){for(var e in window.cheats={Change_Map:"game.setMap([#,#] or #,#);",Change_Map_Location:"game.shiftToLocation(#);",Fast_Forward:"game.fastforward(amount; 1 by default);",Life:"game.gainLife(# amount or Infinity)",Low_Gravity:"game.player.gravity = game.gravity /= 2;",Lulz:"game.lulz();",Random_Map:"game.setMapRandom();",Shroom:"game.playerShroom(game.player)",Star_Power:"game.playerStar(game.player)",Unlimited_Time:"game.data.time.amount = Infinity;"},cheatsize=0,cheats)cheatsize=Math.max(cheatsize,e.length)}function displayCheats(){for(i in cheats)printCheat(i,cheats[i]);return"Have fun!"}function printCheat(e,t){for(i=cheatsize-e.length;i>0;--i)e+="."}window.onload=function(){start(),setTimeout((()=>{document.querySelectorAll(".maprectout .maprect").forEach((function(e){e.addEventListener("click",(function(){let t=e.getAttribute("id").replace("maprect","").split(",");setGameMap(t[0],t[1])}),!1)}))}),100)};