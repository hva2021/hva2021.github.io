function QuadsKeepr(t){"use strict";var n,i,u,r,e,s,h,o,f,a,g,c,d,l,m,_,p,v,Q,q,b,w;this.getQuadrants=function(){return n},this.getNumQuads=function(){return u},this.getNumRows=function(){return r},this.getNumCols=function(){return e},this.getQuadWidth=function(){return o},this.getQuadHeight=function(){return f},this.getDelX=function(){return g},this.getOutDifference=function(){return c};var x=this.resetQuadrants=function(){n.length=0,i.length=0;for(var t=0;t<e;++t)C((t-2)*o);d=n[0]};function N(t,n){this.left=n,this.top=(t-1)*f,this.right=this.left+o,this.bottom=this.top+f,this.things=[],this.numobjects=this.tolx=this.toly=0}function C(t){for(var u=[],e=0;e<r;++e)l=new N(e,t),u.push(l),n.push(l);i.push(u)}function D(){i.shift();for(var t=0;t<r;++t)n.shift();d=n[0],c=o}function j(t){for(var n=0,i=t.length;n<i;++n)y(t[n])}this.updateQuadrants=function(t){for(c+=t=t||0;d.left<=g;)D(),C(l.right),w&&w()},this.determineAllQuadrants=function(){var t,i;for(t=0;t<u;++t)n[t].numthings=0;for(t=0,i=arguments.length;t<i;++t)j(arguments[t])};var y=this.determineThingQuadrants=function(t){t[Q]=0;for(var i=0;i<u;++i)if(H(t,n[i])&&(A(t,n[i],i),t[Q]>t[q]))return};function A(t,n,i){t[b][t[Q]]=n,++t[Q],n.things[n.numthings]=t,++n.numthings}function H(t,n){return t[p]+a>=n.left&&t[m]-a<=n.right&&t[v]+a>=n.top&&t[_]-a<=n.bottom}!function(t){n=[],i=[],u=t.num_quads,r=t.num_rows,e=t.num_cols,u?(r&&(e=u/r),e&&(r=u/e)):(r||(r=2),e||(e=2),u=r*e),s=t.screen_width||640,h=t.screen_height||480,o=s/(e-3),f=h/(r-2),a=t.tolerance||0,g=t.delx||-2*o,c=o,m=t.thing_left||"left",p=t.thing_right||"right",_=t.thing_top||"top",v=t.thing_bottom||"bottom",Q=t.thing_num_quads||"numquads",q=t.thing_max_quads||"maxquads",b=t.thing_quadrants||"quadrants",w=t.onUpdate,t.onCollide,x()}(t||{})}