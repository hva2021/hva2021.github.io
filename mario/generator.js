function resetSeed(){window.seeder=1777771/(window.seed=round(1e7*random())),window.seedlast=.007,window.getSeed=function(){return seedlast="0."+String(seeder/seedlast).substring(4).replace(".","")}}function pushRandomSectionOverworld(e){var r=max(randTrue(117),1),a=0;if(++map.num_random_sections,pushPreFuncCollider(e,zoneDisableCheeps),map.had_floor=!1,map.needs_floor||r>=14||r<3||randTrue()?(pushPreFloor(e,0,r),map.had_floor=!0):(a=0,pushPreThing(Stone,e,a,r)),window.randcount_powerup=3,r<=3&&map.had_floor){if(randTrue())switch(randTrue(3)){case 0:if(r>3){pushPreScenery("HillSmall",e,0);break}case 1:if(r>2){pushPreScenery("Bush1",e+8*max(0,randTrue(r-2)),a);break}case 2:pushPreScenery("PlantLarge",e+8*max(0,randTrue(r-2)),a);break;case 3:pushPreScenery("PlantSmall",e+8*max(0,randTrue(r-2)),a)}}else for(var n=r-2,u=0,d=0,o=randTrue(2);o<n;o+=3)randTrue(7)&&(randTrue(2)?(map.hadObstacle=!1,(d%3==0||randTrue())&&(pushRandomChunkEnemy(e,o),++d),map.had_floor&&pushRandomGroundScenery(e+8*o,o,r)):pushRandomObstacle(e,o),!u&&randTrue()?(pushRandomSkyScenery(e+8*o),u=!0):u=!1);prepareNextGeneratorStandard(e,r,pushRandomSectionOverworld)}function startRandomSectionBridge(e){pushPreFuncCollider(e-24,zoneDisableCheeps),pushPreFuncCollider(e,zoneEnableCheeps);var r=5+randTrue(4),a=r-4;map.needs_bridge=!0,map.treelev=map.treeheight=0,pushPreTree(e,0,r+1),pushPreThing(Stone,e+16,8,1,1),pushPreThing(Stone,e+24,16,1,2),pushPreThing(Stone,e+32,24,a,3),pushRandomSectionBridge(e+8*(r-1),24,!0),spawnMap(),map.had_floor=!1}function pushRandomSectionBridge(e,r,a){var n=!1;if(r=r||24+16*randTrue()-8,randTrue()||map.needs_bridge)switch(randTrue(3)){case 0:switch(randTrue()){case 0:var u=randTrue(3)+1,d=4*u;n=!0;for(var o=1;o<=2*u;o+=2)pushPreBridge(e+16*o,r,3);break;case 1:d=randTrue(7)+7;var s=DtB(r,8);a||pushPreThing(Stone,e,r,1,s),pushPreBridge(e+8,r,d-1),pushPreThing(Stone,e+8*d,r,1,s)}break;default:map.needs_bridge=map.treeheight=0;s=DtB(r,8);d=17*(randTrue(3)+3);for(o=0;o<d;o+=17)if(!o&&a||pushPreThing(Stone,e+8*o,r,1,s),pushPreBridge(e+8*(o+1),r,16),randTrue()&&pushRandomSmallEnemy(e+8*(o+8),r),randTrue(2)){randTrue();var i=3+randTrue(2);pushRandomCoinRow(e+8*(o+8),r+32,i),pushRandomCoinRow(e+8*(o+8),r+40,getNextCoinRowSize(i))}else pushPreThing(Block,e+8*(o+8),r+jumplev1,Mushroom);pushPreThing(Stone,e+8*d,r,1,s)}else d=10,pushPreTree(e+16,8*randTrue(),d);prepareNextGeneratorStandard(e,d+2,randTrue()?pushRandomSectionBridge:pushRandomSectionOverworld,!1,n)}function pushRandomSectionPreCastle(e,r){var a,n,u=randTrue(35)+35,d=u-3,o=!1;for(r=r||0,pushPreFloor(e,0,u),hadcloud=!1,n=randTrue(3);n<d;n+=a||3){switch(randTrue(3)){case 0:switch(a=3,randTrue(2)){case 0:var s=randTrue(2)+1;pushPreThing(Cannon,e+8*(n+randTrue(2)),8*s,s);break;case 1:for(var i=0;i<a;++i)randTrue()||(s=randTrue(3)+1,pushPreThing(Stone,e+8*(n+i),8*s,1,s));break;case 2:pushPrePipe(e+8*(n+randTrue()),0,8*(2+randTrue(2)),!0)}break;case 1:switch(a=7,o=!0,randTrue(2)){case 0:pushPreThing(Koopa,e+8*(n+randTrue(7)),12+8*randTrue(3),randTrue(),!0);break;case 1:randTrue()&&pushPreThing(HammerBro,e+8*(n+randTrue(7)),12+2*randTrue(3));break;case 2:a=10,o=!1;for(i=1;i<8;++i)for(var h=jumplev1;h<=jumplev2;h+=32)pushPreThing(Brick,e+8*(n+i),h,getRandomBrickItem(!1,randTrue()));var t=randTrue()?jumplev1:jumplev2;height2=s==jumplev1?jumplev2:jumplev1,randTrue(2)&&pushPreThing(HammerBro,e+8*(n+randTrue(3)),t+12),randTrue(2)&&pushPreThing(HammerBro,e+8*(n+4+randTrue(3)),height2+12)}}o&&a>=7&&(pushPreScenery("CastleWall",e+8*(n+randTrue()),0,a-randTrue(2)),randTrue()&&pushPreThing(Brick,e+8*(n+randTrue(a)),jumplev1,randTrue()?Mushroom:getRandomBrickItem(!1,randTrue())));for(h=0;h<a;h+=3)randTrue(2)&&pushRandomGroundScenery(e+8*(n+h),0),!hadcloud&&randTrue()?(pushRandomSkyScenery(e+8*(n+h)),hadcloud=!0):hadcloud=!1}pushPreFloor(e+8*u,0,n+3-u);var p=4+randTrue(3);r>=3?endCastleOutsideRandom(e+8*(u+p+1),!0):pushRandomSectionPreCastle(e+8*(u+p),r+1),spawnMap()}function endCastleOutsideRandom(e){var r,a;switch(randTrue()){case 0:for(a=1+randTrue();a<9;a+=2)pushPreThing(Stone,e+8*a,8*(a-randTrue()),1,1+randTrue());pushPreThing(Stone,e+72,64,2),r=12;break;case 1:for(pushPreFloor(e,0,11),a=1,hadlast=!1;a<9;++a)!hadlast||randTrue(2)||8==a?(pushPreThing(Stone,e+8*a,8*a,1,a),hadlast=!0):(hadlast=!1,pushPrePipe(e+8*a,0,8*max(a-randTrue(2),2),!0),++a);pushPreThing(Stone,e+72,72,2,9),r=7}pushPreFloor(e+88,0,round(gamescreen.width/8)),endCastleOutside(e+8*(9+r)+4,0,!0,round(gamescreen.width/8))}function startRandomSectionCastle(e){e+=32;var r=randTrue(7)+3,a=randTrue(4)+3;randTrue(4);pushPreFloor(e,24,r),pushPreThing(Stone,e,88,r,3),fillPreWater(e+8*r,0,2*a),pushPreThing(Podoboo,e+8*r+max(0,8*randTrue(a-3)),-32),pushRandomSectionCastle(e+8*(r+a),0),spawnMap()}function pushRandomSectionCastle(e,r){var a,n;switch(randTrue(3)){case 0:n=64*(a=1+randTrue(2))-8;for(var u=0;u<a;++u)randTrue()?(makeCeilingCastle(e+64*u,8),fillPreWater(e+64*u,0,16),pushPreThing(Platform,e+64*u+8+8*randTrue(2),8+8*randTrue(max(u+2,4)),4,moveFalling)):(pushPreFloor(e+64*u-8,8,1),pushPrePlatformGenerator(e+64*u+24,4,1.75),pushPreFloor(e+64*u+64,8,1));break;case 1:var d,o,s;n=64*(a=2*(1+randTrue()))-8,makeCeilingCastle(e,8*a),fillPreWater(e,0,16*a);for(u=0;u<a;++u){switch(d=e+64*u,o=8*randTrue(max(u+1,2+randTrue(2))),s=2+randTrue(3),randTrue(2)){case 0:pushPreFloor(d+8*randTrue(3),o,s);break;case 1:pushPreThing(Stone,d+8*randTrue(3),o,s);break;case 2:d+=8+8*randTrue(),pushPreThing(Platform,d,8*randTrue(3),4,[moveSliding,d,d+56+8*randTrue(2),2])}randTrue(2)||s%2!=1||pushPreThing(Block,d+4*s-8,o+40,Mushroom),s<=4&&pushPreThing(Podoboo,d+8*(s+1),-32)}break;case 2:var i;switch(n=8*(a=14+randTrue(21))-8,T=1,pushPreFloor(e,0,a),randTrue()){case 0:T=3,makeCeilingCastle(e,a,T);for(u=1+randTrue();u<a-6;++u)i=min(7,a-u),pushPreThing(Stone,e+8*u,jumplev1,i),randTrue()&&pushPreThing(CastleBlock,e+8*(u+i-4),0,[6,randTrue()],!0),pushPreThing(CastleBlock,e+8*(u+i),jumplev1,6,randTrue()),randTrue()&&pushPreThing(CastleBlock,e+8*(u+i+4),jumplev2+8,[6,randTrue()],!0),u+=i;break;case 1:makeCeilingCastle(e,a,T);var h=randTrue(),t=randTrue();pushPreThing(Stone,e,8*h,a,h);for(u=randTrue(2);u<a-3;u+=4)pushPreThing(Stone,e+8*(u+t),16+8*h,3,2),pushPreThing(CastleBlock,e+8*(u+t+1),24+8*h,randTrue(2)?6:0,randSign()),pushPreThing(Stone,e+8*(u+t),80,3,2),u<a-5&&pushPreThing(CastleBlock,e+8*(u+t+1),64,randTrue(2)?6:0,randSign()),u+=1+randTrue(3)}break;case 3:n=8*(a=21+randTrue(21))-8;var p=1+randTrue(3),T=11-p-4;pushPreFloor(e,8*p,a),makeCeilingCastle(e,a,T);for(u=0;u<a;u+=8)randTrue()&&(pushRandomEnemy(e+8*u,8*p,0),randTrue()&&(pushRandomEnemy(e+8*u+12,8*p,0),randTrue()&&pushRandomEnemy(e+8*u+24,8*p,0)))}pushPreThing(GenerationStarter,e+n,ceilmax+20,r<=280?pushRandomSectionCastle:endCastleInsideRandom,r+n/8),spawnMap()}function endCastleInsideRandom(e){var r,a=2+randTrue(2),n=8*randTrue(),u=n+24+8*randTrue();pushPreFloor(e,n,5*a);for(var d=0;d<a;++d)r=max(2,randTrue(3)),pushPreFloor(e+5*(d+1)*8,u,r);var o=e+5*a*8,s=8*randTrue(7);fillPreWater(o,0,s),endCastleInsideRandomFinal(o+s),spawnMap()}function endCastleInsideRandomFinal(e){fillPreWater(e,0,16),pushPreFloor(e+24,24,3),endCastleInside(e+48,2),randTrue()&&pushPreThing(Podoboo,e+72+8*randTrue(3),-32),randTrue()&&fillPreThing(Brick,e+56+8*randTrue(3),64,3+randTrue(3),1,8),randTrue()&&pushPreThing(CastleBlock,e+56+8*randTrue(2),24,[6,randSign()],!0),spawnMap()}function placeRandomCastleNPC(e){pushPreThing(Toad,e+194,12).object.text=[pushPreText({innerHTML:"THANK YOU "+window.player.title.toUpperCase()+"!"},e+160,66).object,pushPreText({innerHTML:"LOL YOU THOUGHT THERE WOULD BE SOMETHING HERE DIDN'T YOU!"},e+148,50).object]}function pushRandomCoinRow(e,r,a){if(a){var n;if(3==a&&(e+=8),randTrue(2))switch(a){case 3:n=[1,0,1];break;case 4:switch(randTrue()){case 0:n=[1,0,0,1];break;case 1:n=[0,1,1,0]}break;case 5:switch(randTrue()){case 0:n=[1,0,1,0,1];break;case 1:n=[0,1,0,1,0]}}else n=arrayOf(!0,a);for(var u=0;u<a;++u)n[u]&&pushPreThing(Coin,e+8*u,r)}}function getNextCoinRowSize(e){switch(e){case 3:return 5;case 5:return 3;default:return e}}function pushRandomSectionTrees(e){var r,a,n;switch(randTrue(7)){case 0:var u,d;r=randTrue(14)+7,a=randTrue(3),map.treefunc(e,8*a,r);for(var o=randTrue(2);o<r-2;o+=u-1)randTrue(2)&&pushRandomSmallEnemy(e+8*o,8*a),randTrue(2)&&(u=3+(randTrue(3)?0:randTrue(4)),d=8*min(9,a+randTrue(7)+3),map.treefunc(e+8*o,d,u),randTrue()&&pushRandomSmallEnemy(e+8*o,8*d),pushRandomSmallEnemy(e+8*(o+=u-1),8*a));break;case 1:r=14,a=7,randTrue(),r=4+randTrue(2),pushPrePlatformGenerator(e+8*(randTrue()+1),r,-1),r+=randTrue(3)+3;break;default:r=4+randSign()+randTrue(),a=min(randTrue(2)+4+randSign(2),map.treelev+4);var s=e-8*randTrue();if(a==map.treelev&&(a+=randSign()),map.treefunc(s,8*a,r),r>3||randTrue())if(randTrue(3))pushRandomSmallEnemy(s+8*(randTrue()+1),8*a);else if(randTrue(2))for(o=1;o<r-1;++o)pushPreThing(Coin,s+1+8*o,8*(a+1)-1)}++map.sincechange>7&&randTrue()?(n=map.randtype,map.sincechange=0):n=pushRandomSectionTrees,pushPreThing(GenerationStarter,e+8*(r+randSign()),ceilmax+20,n),spawnMap(),map.treelev=a}function pushRandomSmallEnemy(e,r,a){switch(randTrue(7)){case 1:case 2:case 3:pushPreThing(Koopa,e,r+12,!0,a);break;case 7:pushPreThing(Beetle,e,r+8.5);break;default:pushPreThing(Goomba,e,r+8)}}function pushRandomSectionUnderworld(e){var r,a,n=max(randTrue(117),1),u=14,d=n-n%u;floor(n/u);if(pushPreFloor(e,0,n),window.randcount_powerup=3,n<u)switch(randTrue()){case 0:for(r=0;r<n-2;r+=3)pushRandomChunkEnemy(e+8*r,0,r);break;case 1:for(r=0;r<n-2;r+=3)randTrue(2)?r%3==0&&pushRandomChunkEnemy(e,r):pushRandomObstacle(e,r)}else for(r=1;r<d;r+=u)switch(randTrue(5)){case 0:pushRandomUnderworldSquigglies(e+8*r,u),makeCeiling(e+8*r,u);break;case 1:var o=1+randTrue(),s=4+randTrue(7);for(r+=o,a=0;a<u;a+=1+randTrue()/2)randTrue()&&pushRandomSmallEnemy(e+8*(r+a),0);fillPreThing(Brick,e+8*r,8*s,13,12-s,8,8),r-=o;break;case 2:createTunnel(e+8*(r+2),10,Brick);break;case 3:pushUnderworldPipes(e+8*(r+2),12),makeCeiling(e+8*(r+1),u);break;case 4:pushUnderworldStones(e+8*(r+2),12),makeCeiling(e+8*(r+1),u);break;case 5:for(a=0;a<10;a+=3)pushRandomChunkEnemy(e+8*(r+a),a);break;case 6:for(a=0;a<n-2;a+=3)randTrue(2)?(r%3==0||randTrue())&&(pushRandomChunkEnemy(e+8*(r+a),a),++numenemychunks):pushRandomObstacle(e+8*(r+a),a)}prepareNextGeneratorStandard(e,n,pushRandomSectionUnderworld,!0),spawnMap()}function pushRandomUnderworldSquigglies(e,r,a,n){a=a||1/0;for(var u=3+randTrue(2),d=min(a,u+1+randTrue(4)),o=1==u?d:randTrue(2)?u:d,s=1+d-u,i=!1,h=d+16,t=0;t<r;++t){if(randTrue()){for(var p=0;p<3;++p)pushPreThing(Brick,e+8*(t+p),8*o,randTrue()?null:getRandomBrickItem());!n&&randTrue(2)&&fillPreThing(Coin,e+1+8*t,8*min(h,o+randTrue(4)+1)-1,3+randTrue(),1,8),i||(randTrue()?pushPreThing(Block,e+8*(t+3),8*o,getRandomBlockItem()):pushPreThing(Brick,e+8*(t+3),8*o),i=!0),t+=3}else fillPreThing(Brick,e+8*t,8*u,1,s,8,8),o=o==d?u:d,i=!1;(t%3==1||randTrue()&&t<r-3)&&pushRandomSmallEnemy(e+8*t,0,!1)}}function pushUnderworldPipes(e,r){var a,n,u,d=r-4,o=!1;for(u=0;u<d;u+=4)switch(randTrue()){case 0:addPipeRandom(e+8*(u+(a=randTrue())),0,8*(2+randTrue(2))),u+=1-a,o=!0;break;case 1:a=randTrue()||!o,n=4+randTrue(4),a&&pushPreThing(Brick,e+8*u,8*max(n-4,3+randTrue()),getRandomBrickItem(!1)),addPipeRandom(e+8*(u+a),0,8*n),o=!1}for(;u<r-1;++u)randTrue()&&pushRandomChunkEnemy(e+8*u,0)}function pushUnderworldStones(e,r){var a,n,u,d=r-4,o=!1;for(u=0;u<d;u+=2)switch(randTrue()){case 0:a=randTrue(),n=2+randTrue(2),pushPreThing(Stone,e+8*(u+a),8*n,1,n),u+=1-a,o=!0;break;case 1:a=randTrue()||!o,n=4+randTrue(4),a&&pushPreThing(Brick,e+8*u,8*max(n-4,3+randTrue()),getRandomBrickItem(!1)),pushPreThing(Stone,e+8*(u+a),8*n,1,n),o=!1}for(;u<r-1;u+=3)randTrue()&&pushRandomChunkEnemy(e+8*u,0)}function pushRandomSectionUnderwater(e){var r=max(randTrue(117),7);r-=r%3,pushPreFloor(e,0,r),pushPreScenery("Water",e,ceilmax-21,8*r/3,1),pushPreThing(WaterBlock,e,ceilmax,8*r),window.randcount_powerup=3;for(var a=0;a<r;a+=4){switch(randTrue(21)){case 0:if(a<r-2){pushRandomObstacle(e,a);break}case 1:pushRandomEnemy(e,0,a,!0);break;default:switch(randTrue(7)){case 0:var n=randTrue()+2,u=randTrue()+2;pushPreThing(Stone,e+8*a,8*u,randTrue(3)+1,u),pushPreThing(Stone,e+8*a,ceillev,randTrue(3)+1,n);break;case 1:randTrue()&&pushPreThing(Stone,e+8*a,jumplev1,4),randTrue()&&pushPreThing(Stone,e+8*a,jumplev2,4);break;case 2:fillPreThing(Coin,e+8*(a+randTrue())+1,8*(randTrue(8)+1)-1,3,1,8);break;default:if(map.had_coral){map.had_coral=!1;break}map.had_coral=!0;var d,o=randTrue(3)+2,s=jumplev1*(1+randTrue(2)),i=e+8*a;if(s==3*jumplev1){var h=!0;s-=8}pushPreThing(Stone,e+8*a,s,o),d=!h&&(randTrue(3)||o<=3)?s+24:s-8,randTrue()&&pushPreThing(Coral,i,d,3),randTrue()&&o>3&&s<64&&pushPreThing(Coral,i+8*(o-1),d,3),o>=3&&(a+=o-3)}}map.countCheep>1&&(pushPreThing(CheepCheep,e+8*a,randTrue(80)+8,randTrue()),map.countCheep=0),map.countBlooper>7&&(pushPreThing(Blooper,e+8*a,randTrue(80)+8),map.countBlooper=0),randTrue(7)&&++map.countCheep,randTrue(3)&&++map.countBlooper}if(++map.sincechange<3){var t=prepareNextGeneratorStandard(e,r,pushRandomSectionUnderwater,!1,!0);pushPreScenery("Water",e+8*r,ceilmax-21,8*(t+1)/3,1),pushPreThing(WaterBlock,e+8*r,ceilmax,8*(t+1))}else endRandomSectionUnderwater(e+8*r)}function endRandomSectionUnderwater(e){pushPreFloor(e,0,19),pushPreScenery("Water",e,ceilmax-21,28,1),pushPreThing(WaterBlock,e,ceilmax,157.5),pushPreThing(Stone,e,8,5,1),pushPreThing(Stone,e+8,16,4,1),pushPreThing(Stone,e+16,24,3,1),pushPreThing(Stone,e+24,32,2,1),pushPreThing(Stone,e+24,88,2,4),pushPreThing(PipeSide,e+32,48,["Random",randTrue()?"Overworld":"Underworld","Up"]),pushPreThing(Stone,e+40,88,14,11),map.scrollblockerok=!0,pushPreThing(ScrollBlocker,e+56,80,!0),spawnMap()}function startRandomSectionSky(e){pushPreThing(Stone,e,0,78),pushPreThing(Platform,e+88,24,6,[collideTransport]),pushRandomSectionSky(e+80,1),spawnMap()}function pushRandomSectionSky(e,r){if(r++>7)return fillPreThing(Coin,e+8,8,3,1,8),spawnMap();var a=0;if(r%2)fillPreThing(Coin,e+1,71,3,1,8),a=32;else switch(randTrue(r)){case 3:pushPreThing(Stone,e+8,48,1,2),fillPreThing(Coin,e+25,63,7,1,8),pushPreThing(Stone,e+88,48,1,2),a=104;break;case 4:case 5:case 6:pushPreThing(Stone,e+8,56,2);for(var n=0;n<=7;n+=2)pushPreThing(Stone,e+8*(n+5),56),fillPreThing(Coin,e+8*(n+5)+1,63,2,1,8);a=104;break;default:fillPreThing(Coin,e+1,55+8*randTrue(),16,1,8),a=128}pushPreThing(GenerationStarter,e+a,ceilmax+20,pushRandomSectionSky,r),spawnMap()}function prepareNextGeneratorStandard(e,r,a,n,u){var d=0,o=0;if(u)d=1;else switch(randTrue(7)){case 0:r>7&&map.underwater&&!randTrue(7)?(d=randTrue(3)+7,pushPreThing(Springboard,e+8*(r-1),14.5)):o=!0;break;case 1:var s=max(1,randTrue(7));d=s+randTrue(3),pushPreFloor(e+8*r,0,s);for(var i=1;i<=s;++i)pushPreThing(Stone,e+8*(r+i-1),8*i,1,i);if(randTrue()){s=max(1,randTrue(s)),pushPreFloor(e+8*(r+d+s-1),0,s);for(var h=0;h<s;++h)pushPreThing(Stone,e+8*(r+d+s+h-1),8*(s-h),1,s-h);d+=s+s-2}break;default:n&&randTrue()?(d=randTrue(1)+4,pushPrePlatformGenerator(e+8*(r+1.5),2*(d-2),randSign())):o=!0}return(o||!d||d<1)&&(d=randTrue(3)+1),a==pushRandomSectionOverworld&&map.num_random_sections>=3+randTrue(7)&&(a=pushRandomSectionPreCastle),!u&&++map.sincechange>3&&(a=getRandomNextSection(),map.sincechange=0,pushPreFuncCollider(e,zoneDisableCheeps)),pushPreThing(GenerationStarter,e+8*(r+d),ceilmax+20,a),spawnMap(),d}function getRandomNextSection(){switch(randTrue()){case 0:return map.treeheight=0,pushRandomSectionTrees;case 1:return startRandomSectionBridge}}function pushRandomChunkEnemy(e,r,a){pushRandomEnemy(e,0,r,a),randTrue(2)&&(pushRandomSolidRow(e+8*r,jumplev1,randTrue(2)+1),randTrue()&&pushRandomEnemy(e,jumplev1,r+1,!0),randTrue()&&(pushRandomSolidRow(e+8*r,jumplev2,randTrue(2)+1),randTrue()&&pushRandomEnemy(e,jumplev2,r+1,!0)))}function pushRandomEnemy(e,r,a,n){switch(randTrue(14)){case 0:case 1:fillPreThing(Beetle,e+8*a,r+8.5,randTrue(2),1,12);break;case 3:if(!n){switch(randTrue(4)){case 0:pushPreThing(HammerBro,e+8*a,r+12),randTrue()&&pushPreThing(HammerBro,e+8*a+16,r+40);break;case 1:if("Underworld"!=map.randname){pushPreThing(Lakitu,e+8*a,r+80,!0);break}case 2:pushPreThing(Blooper,e+8*a,r+40)}break}break;default:if(!randTrue(3))return;switch(randTrue(3)){case 1:fillPreThing(Koopa,e+8*a,r+12,randTrue(2),1,12,0,randTrue()||map.onlysmartkoopas,randTrue());break;default:fillPreThing(Goomba,e+8*a,r+8,randTrue(2),1,12)}}}function addPipeRandom(e,r,a){var n;n=!(a<=24||randTrue(2))&&getRandomTransport(),pushPrePipe(e,r,a,randTrue(7),n)}function getRandomTransport(){var e,r=[["Overworld","Up"],["Underworld","Down"],["Underwater","Up"]];return r[e=randTrue(r.length-1)][0]==map.randname&&(e=(e+randTrue(r.length-2)+1)%r.length),["Random",r[e][0],r[e][1]]}function getAfterSkyTransport(){switch(randTrue(3)){case 0:return["Random","Underworld","Down"];default:return["Random","Overworld"+(body.className.indexOf(!0)?" Night":""),"Down"]}}function pushRandomObstacle(e,r){var a=randTrue(3);switch(a>1&&(map.hadPipe=!1),a){case 0:case 1:if(r>1){addPipeRandom(e+8*r,0,8*(randTrue(2+(1==map.hadObstacle&&0==map.hadPipe&&r>7))+2)),map.hadObstacle=map.hadPipe=!0;break}case 2:for(var n=0;n<2;++n)randTrue()||r<1||(u=randTrue(2)+2,pushPreThing(Stone,e+8*(r+n),8*u,1,u));break;default:n=randTrue(2);switch(randTrue(7)){case 0:var u=randTrue(2)+1;if(pushPreThing(Cannon,e+8*(r+n),8*u,u),1==u&&randTrue(2)&&2!=n){var d=randTrue()+2;pushPreThing(Cannon,e+8*(r+n),8*u+8*d,d)}map.hadObstacle=!0;break;case 1:if(!map.underwater){randTrue()&&(!map.underwater&&randTrue(2)&&pushPreThing(Brick,e+8*r,jumplev1),pushPreThing(Block,e+8*(r+1),jumplev1,[Mushroom,1],!0),!map.underwater&&randTrue(2)&&pushPreThing(Brick,e+8*(r+2),jumplev1),map.hadObstacle=!0);break}case 2:if(!map.underwater){var o=randTrue();o||pushPreThing(Brick,e+8*r,jumplev1,getRandomBrickItem()),pushPreThing(Stone,e+8*(r+o),jumplev1,2),addPipeRandom(e+8*(r+o),jumplev1,24+8*randTrue()),o&&pushPreThing(Brick,e+8*r,jumplev1,getRandomBrickItem());break}}}}function pushRandomSolidRow(e,r,a){for(var n=0;n<a;++n)randTrue(2)?pushPreThing(Brick,e+8*n,r,getRandomBrickItem("Overworld"==map.randname&&r==jumplev2)):pushPreThing(Block,e+8*n,r,getRandomBlockItem())}function getRandomBrickItem(e,r){return e&&!randTrue(14)?[Vine,["Random","Sky","Vine"]]:!(!r&&randTrue(7))&&(randTrue(3)?Coin:Star)}function getRandomBlockItem(){return++randcount_powerup,!(randcount_powerup<=7)&&(!randTrue(7)&&Mushroom)}function pushRandomGroundScenery(e,r,a){switch(randTrue(7)){case 2:if(a-r>4){pushPreScenery("Bush3",e,0);break}case 1:if(a-r>2){pushPreScenery("Bush2",e,0);break}case 0:pushPreScenery("Bush1",e,0);break;case 3:if(a-r>4){pushPreScenery("HillLarge",e,0);break}case 4:pushPreScenery("HillSmall",e,0);break;case 5:pushPreScenery("PlantLarge",e,0);break;case 6:pushPreScenery("PlantSmall",e,0);break;case 7:pushPreScenery("Fence",e,0,randTrue(2)+1)}}function pushRandomSkyScenery(e){switch(randTrue(2)){case 0:pushPreScenery("Cloud1",e,8*(randTrue(5)+5));break;case 1:pushPreScenery("Cloud2",e,8*(randTrue(4)+6));break;case 2:pushPreScenery("Cloud3",e,8*(randTrue(3)+7))}}function addDistanceCounter(){counter=createElement("div",{className:"indisplay counter randomdisplay",innerText:data.traveledold+" blocks traveled"}),body.appendChild(counter),TimeHandler.addEventInterval((function(e){data.traveled=max(0,Math.round((player.right+gamescreen.left)/unitsizet8)-3),e.innerText=data.traveledold+data.traveled+" blocks traveled"}),3,1/0,counter)}function addSeedDisplay(){}function createTunnel(e,r,a){for(var n=randTrue(2)+3,u=randTrue(2)+2,d=!1,o=0;o<r;++o)fillPreThing(a,e+8*o,8,1,u,8,8),randTrue(3)||d?d=!1:pushRandomSmallEnemy(e+8*o,8*u),fillPreThing(a,e+8*o,96-8*n,1,n,8,8)}function removeRandomDisplays(){var e,r=body.getElementsByClassName("randomdisplay");for(e=r.length-1;e>=0;--e)body.removeChild(r[e])}